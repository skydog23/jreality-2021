<toolconfig>

  <rawdevices>
    <rawdevice id="Motionstar" type="de.jreality.scene.tool.DeviceMotionstar"/>
    <rawdevice id="Keyboard" type="de.jreality.scene.tool.DeviceKeyboard"/>
    <rawdevice id="Mouse" type="de.jreality.scene.tool.DeviceMouse"/>
    <rawdevice id="SystemTimer" type="de.jreality.scene.tool.DeviceSystemTimer"/>
    <!--rawdevice id="Joystick" type="de.jreality.scene.tool.DeviceJoystick"/-->
  </rawdevices>

  <rawslots>
  <!-- map slots of raw devices to InputSlots -->
    <mapping device="Keyboard" src="VK_W" target="forward"/>
    <mapping device="Keyboard" src="VK_SPACE" target="JumpActivation"/>
    <mapping device="Keyboard" src="VK_CONTROL" target="Meta"/>
    <mapping device="Keyboard" src="VK_R" target="DrawPickActivation"/>
    <mapping device="Keyboard" src="VK_S" target="backward"/>
    <mapping device="Keyboard" src="VK_A" target="left"/>
    <mapping device="Keyboard" src="VK_D" target="right"/>
    <mapping device="Keyboard" src="VK_P" target="ShowPick"/>
    <mapping device="Keyboard" src="VK_L" target="LookSwitch"/>
    <mapping device="Keyboard" src="VK_E" target="EncompassActivation"/>
    <mapping device="Keyboard" src="VK_0" target="IncreaseSpeed"/>
    <mapping device="Keyboard" src="VK_9" target="DecreaseSpeed"/>
    <mapping device="Mouse" src="left" target="PrimaryAction"/>
    <mapping device="Mouse" src="left_shift" target="SecondaryAction"/>
    <mapping device="Mouse" src="right" target="PrimarySelection"/>
    <mapping device="Mouse" src="right_shift" target="SecondarySelection"/>
    <mapping device="Mouse" src="center" target="PrimaryMenu"/>
    <mapping device="Mouse" src="center_shift" target="SecondaryMenu"/>
    <mapping device="Mouse" src="wheel_up" target="PrimaryUp"/>
    <mapping device="Mouse" src="wheel_down" target="PrimaryDown"/>
    <mapping device="Mouse" src="axes" target="PointerNDC"/>
    
    <mapping device="SystemTimer" src="tick" target="SystemTime"/>

    <mapping device="Motionstar" src="wand_left" target="PrimaryAction"/>
    <mapping device="Motionstar" src="wand_center" target="PrimaryMenu"/>
    <mapping device="Motionstar" src="wand_right" target="PrimarySelection"/>
    <mapping device="Motionstar" src="wand_axes" target="PrimaryNavigationNDC"/>
    <mapping device="Motionstar" src="wandMatrix" target="PointerShipTransformation"/>
    <mapping device="Motionstar" src="headMatrix" target="AvatarShipTransformation"/>
  </rawslots>
  
  
  <virtualdevices>

     <mapping src="PrimarySelection" target="ShowPanel"/>
    <mapping src="PrimaryAction" target="RotateActivation"/>
    <mapping src="PrimarySelection" target="JumpActivation"/>
    <mapping src="PrimaryMenu" target="DragActivation"/>
    <mapping src="PrimaryAction" target="PointDragActivation"/>
    
    <constant name="FollowPointerSwitch">
      <double>0</double>
    </constant>
    
    <constant name="ShipRotateActivation">
      <double>1</double>
    </constant>

    <virtualdevice type="de.jreality.scene.tool.VirtualProductMatrix">
      <inputslot>AvatarTransformation</inputslot>
      <inputslot>PointerShipTransformation</inputslot>
      <outputslot>PointerTransformation</outputslot>
    </virtualdevice>

    <virtualdevice type="de.jreality.scene.tool.VirtualCoupledAxis">
      <inputslot>PrimaryAction</inputslot>
      <inputslot>PrimarySelection</inputslot>
      <outputslot>EncompassActivation</outputslot>
    </virtualdevice>

    <virtualdevice type="de.jreality.scene.tool.VirtualExtractRotationTrafo">
      <inputslot>PointerTransformation</inputslot>
      <outputslot>PointerRotation</outputslot>
    </virtualdevice>

    <virtualdevice type="de.jreality.scene.tool.VirtualEvolutionOperator">
      <inputslot>PointerRotation</inputslot>
      <outputslot>TrackballTransformationInv</outputslot>
    </virtualdevice>
    
    <virtualdevice type="de.jreality.scene.tool.VirtualInvertMatrix">
      <inputslot>TrackballTransformationInv</inputslot>
      <outputslot>TrackballTransformation</outputslot>
    </virtualdevice>

    <virtualdevice type="de.jreality.scene.tool.VirtualEvolutionOperator">
      <inputslot>PointerTransformation</inputslot>
      <outputslot>PointerEvolution</outputslot>
    </virtualdevice>
    
    <virtualdevice type="de.jreality.scene.tool.VirtualProductMatrix">
      <inputslot>AvatarTransformation</inputslot>
      <inputslot>AvatarShipTransformation</inputslot>
      <outputslot>WorldToCamera</outputslot>
    </virtualdevice>

    <virtualdevice type="de.jreality.scene.tool.VirtualExtractAxis">
      <inputslot>PrimaryNavigationNDC</inputslot>
      <outputslot>ForwardBackwardAxis</outputslot>
      <prop name="axis">
        <string>translationY</string>
      </prop>
    </virtualdevice>
    
    <virtualdevice type="de.jreality.scene.tool.VirtualExtractAxis">
      <inputslot>PrimaryNavigationNDC</inputslot>
      <outputslot>HorizontalShipRotationAngleEvolution</outputslot>
      <prop name="axis">
        <string>translationX</string>
      </prop>
      <prop name="gain">
        <double>-1</double>
      </prop>
    </virtualdevice>

  </virtualdevices>
</toolconfig>
